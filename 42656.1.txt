@0
## DOUBLE STACK

# USES BOTH STACK
# INSTEAD OF ONLY
# ONE, THAT WAY
# YOU CAN START
# WORKING ON THE
# NEXT SEQ WHILE
# THE PRIOR ONE
# GETS OUTPUTED

@1
S: MOV UP ACC
   JEZ Z
   MOV ACC RIGHT
   SWP
   ADD 1
   SAV
   JMP S
Z: MOV -12 DOWN #J
   SWP
   MOV ACC DOWN
   JMP E
   MOV UP DOWN
E: JRO DOWN

@2


@3
# BUG: STACK
# ACCESS IS NOT
# THREAD-SAFE AND
# THE PROGRAM IS
# SUFFERING FROM
# RACE-CONDITIONS

@4
   JMP E
   MOV UP RIGHT
S: MOV -1 UP #J
   MOV UP ACC
   JEZ Z
   MOV ACC DOWN
   SWP
   ADD 1
   SAV
   JMP S
Z: MOV -12 UP #J
   SWP
   MOV ACC RIGHT
E: JRO UP

@5
S: MOV LEFT ACC
L: SUB 1
   JLZ E
   MOV -1 DOWN #J
   MOV UP DOWN
   JMP L

E: MOV -1 DOWN #J
   MOV 0 DOWN

   MOV 1 DOWN #J
   MOV LEFT DOWN

@6


@7
   JMP E
   MOV UP DOWN
E: JRO UP

S: MOV UP ACC
L: SUB 1
   JLZ F
   MOV LEFT DOWN
   JMP L
F: MOV 0 DOWN

@8

